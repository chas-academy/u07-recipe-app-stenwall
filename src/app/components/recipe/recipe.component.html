<ng-container *ngIf="recipe">

    <header class="header-wrapper">
        <a [routerLink]="['/']">
            <h2 id="back-title-recipe">
                <span class="material-icons">arrow_back</span>
                {{ data.title }}
            </h2>
        </a>

        <ng-container *ngIf="isLargeScreen; then largeScreen; else smallScreen">
        </ng-container>

        <ng-template #largeScreen>
            <mat-tab-group class="tabs-lg" mat-align-tabs="center" (selectedTabChange)="onTabChange($event)">
                <mat-tab label="ingredients"></mat-tab>
                <mat-tab label="instructions"></mat-tab>
            </mat-tab-group>
        </ng-template>

        <ng-template #smallScreen>
            <mat-tab-group class="bottom-tabs" mat-align-tabs="center" (click)="openBottomSheet($event)"
                headerPosition="below">
                <mat-tab label="ingredients"></mat-tab>
                <mat-tab label="instructions"></mat-tab>
            </mat-tab-group>
        </ng-template>
    </header>

    <mat-divider></mat-divider>

    <ng-template let-bottomSheetRef="bottomSheetRef" #templateBottomSheet class="bottom-sheet">
        <button mat-flat-button class="close-btn" color="accent" (click)="closeBottomSheet()">
            <mat-icon color="white">close</mat-icon> close
        </button>
        <mat-list *ngIf="selectedTab === 'ingredients'">
            <mat-list-item *ngFor="let extendedIngredient of extendedIngredients" class="mat-list-item-word-wrap">
                <mat-icon mat-list-icon>adjust</mat-icon>
                <p mat-line>{{ extendedIngredient.originalString }}</p>
            </mat-list-item>
        </mat-list>
        <mat-list *ngIf="selectedTab === 'instructions'">
            <mat-list-item *ngFor="let step of steps" class="mat-list-item-word-wrap">
                <mat-icon mat-list-icon>adjust</mat-icon>
                <h4 mat-line>Step {{ step.number }}</h4>
                <p mat-line>{{ step.step }}</p>
            </mat-list-item>
        </mat-list>
    </ng-template>

    <main class="recipe-wrapper">
        <div class="recipe-info">
            <h2 class="recipe-title">{{ recipe.title }}</h2>
            <img src="{{ recipe.image }}" alt="the chosen dish when ready">
            <!-- <button *ngIf="!isRecipeSaved()" mat-flat-button class="list-btn" color="primary"
                (click)="addRecipeToList()">
                <mat-icon color="white">favorite</mat-icon> Add to list
            </button>
            <button *ngIf="isRecipeSaved()" mat-flat-button class="list-btn" color="accent"
                (click)="removeRecipeFromList()">
                <mat-icon color="white">close</mat-icon> Remove from list
            </button> -->

            <app-select-list [data]="recipe"></app-select-list>

            <div class="info-box">
                <p class="ready-time">
                    <span class="material-icons">schedule</span>
                    Ready in: {{ recipe.readyInMinutes }} minutes
                </p>
                <div class="chip-wrapper">
                    <p *ngIf="recipe.vegan">Vegan</p>
                    <p *ngIf="recipe.dairyFree">Dairy free</p>
                    <p *ngIf="recipe.glutenFree">Gluten free</p>
                </div>
            </div>
        </div>

        <div class="recipe-tabs" *ngIf="isLargeScreen">
            <mat-list *ngIf="selectedTab === 'ingredients'">
                <mat-list-item *ngFor="let extendedIngredient of extendedIngredients" class="mat-list-item-word-wrap">
                    <mat-icon mat-list-icon>adjust</mat-icon>
                    <p mat-line>{{ extendedIngredient.originalString }}</p>
                </mat-list-item>
            </mat-list>
            <mat-list *ngIf="selectedTab === 'instructions'">
                <mat-list-item *ngFor="let step of steps" class="mat-list-item-word-wrap">
                    <mat-icon mat-list-icon>adjust</mat-icon>
                    <h4 mat-line>Step {{ step.number }}</h4>
                    <p mat-line>{{ step.step }}</p>
                </mat-list-item>
            </mat-list>
        </div>
    </main>

</ng-container>

<!-- 
source to smooth ngIf solution:
-----------------------------------------------------------------------
https://ultimatecourses.com/blog/angular-ngif-else-then
-->